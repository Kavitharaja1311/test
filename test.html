<!DOCTYPE html>
<html onCut="return false;" onCopy = "return false;" onPaste = "return false;" onkeydown="return (event.keyCode == 154)"> 
<head>
  <title>Aptitude Quiz</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://js.zohostatic.com/creator/widgets/version/1.0/widgetsdk-min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.26.1/min/vs/editor/editor.main.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.26.1/min/vs/loader.js"></script>
  <style>
    html
    {
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    #snap_cnt{
      padding: 4px 20px;
      background-color: green;
      color: white;
      border: 1px solid green;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      border-radius: 7px;
    }
    #strt_test
    {
      background-color: green;
      border: 1px solid green;
      padding: 8px 16px;
      border-radius: 3px;
      color: white;
      letter-spacing: 1px;
      font-weight: 500;
      margin-top: 14px;
      margin-left: 14px;
    }
    .nrml_vid , .nrml_aud
    {
      background-color: red;
      color: white;
      border: 1px solid red;
      padding: 6px 12px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      letter-spacing: 0.5px;
    }
    .enable_dio, .enable_vdio
    {
      background-color: white;
      color: green;
      border: 1px solid green;
      padding: 6px 12px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      letter-spacing: 0.5px;
      cursor: none;
    }
    #mic_btn
    {
      margin-right: 10px;
    }
    #alw_btn
    {
      margin-left: 5px;
    }
    .top_navbar

      {
        height: 76px;
        width: auto;
        background-color: #422a8d;
        padding: 8px 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border: 0.2px solid #422a8d;
      }
      .left_content , .logo_img
      {
        width: 172px;
        height: auto;
        margin-left: 20px;
      }
      .right_content
      {
        margin-right: 20px;
        display: flex;
        align-items: center;
      }
      #user_img
      {
        width: 40px;
        background-color: white;
        height: 40px;
        border-radius: 50%;
        margin-right: 15px;
      }
      .examiner_name
      {
        color: white;
        letter-spacing: 1px;
        font-weight: bold;
        display: flex;
        flex-wrap: wrap;
      }
      .main_container
      {
        display: flex;
        border: 1px solid white;
        height: 900px;
        -webkit-user-select: none; 
        -ms-user-select: none;
        user-select: none;
      }
      .side_navbar
      {
        background-color: #422a8d;
        width: 15%;
        height: 100%;
        display: block;
        overflow: hidden;
      }
      .exam_icon{
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px 0;
        border-bottom: 0.2px solid grey;
      }
      .exam_icon img
      {
        border-radius: 50%;
        width: 100px;
        height: 100px;
        border: transparent; 
      }
      .test_type
      {
        display: flex;
        flex-direction: column;
        border-bottom: 0.2px solid grey;
        color: white;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-weight: 500;
        letter-spacing: 0.2px;
      }
      .nav_btn
      {
        align-items: center;
        justify-content: space-evenly;
        display: flex;
        padding: 8px 2px;
        flex-wrap: wrap;
        column-gap: 5px;
        row-gap: 15px;
        padding-bottom: 50px;
      }
      .nrmlBtn{
        width: 30px;
        height: 30px;
        cursor: pointer;
        border-radius: 2px;
        outline: none;
        border: 2px solid grey;
        font-weight: 500;
      }
      .grnBtn
      {
        width: 30px;
        height: 30px;
        color: white;
        cursor: pointer;
        border-radius: 2px;
        outline: none;
        border: 2px solid white;
        font-weight: bolder;
        background-color: #228B22;
      }
      .bluBtn , .highlighted
      {
        width: 30px;
        height: 30px;
        color: white;
        cursor: pointer;
        border-radius: 2px;
        outline: none;
        border: 1px solid white;
        font-weight: bolder;
        background-color: #422a8d;
      }
      input[name="category"] 
      {
      display: none;
      }
      .category_title {
        cursor: pointer;
        letter-spacing: 0.8px;
        padding: 16px 0px;
        font-size: 16px;
        margin: 0;
      }
      input[name="category"]:checked + .category_title{
        background-color: white;
        width: 100%;
        height: 100%;
        display: flex;
        font-weight: bold;
        color: #422a8d;
        justify-content: center;
        border-top: 0.1px solid #422a8d;
        border-bottom: 0.1px solid #422a8d;
      }
      .text_container
      {
        width: 85%;
      }
      .bar_continer
      {
        height: 100px;
        width: 100%;
        background-color: #fafafa;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); 
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .progress_bar
      {
        width: 70%;
        margin-left: 10px;
        align-items: center;
      }
      .chart_bar
      {
        color: white;
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
        height: 20px;
        background-color: #007bff;
        display: flex;
        align-items: center;
        padding: 5px 0;
        justify-content: center;
      }
      .time_btn
      {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-right: 40px;
        padding: 10px 10px;
        border: 1px solid green;
        background-color: green;
        border-radius: 2px;
        color: white;
        font-weight: 500;
        letter-spacing: 1px;
        font-size: 14px;
      }
      .time_btn svg{
        color: white;
        margin-right: 8px;
      }
      .quiz_container
      {
        width: 1000px;
        height: auto;
        margin-top: 38px;
        display: block;
        margin-left: 60px;
      }
      .question_container
      {
        display: flex;
        column-gap: 8px;
        align-items: center;
        font-size: 16px;
        font-weight: 600;
      }
      .question_title
      {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 16px;
        font-weight: 600;
        letter-spacing: 1px;
        line-height: 25px;
        margin-left: 10px;  
      }
      .ans_cont , .btn_container , #prgm_cnt
      {
        margin-top: 20px;
        font-size: 16px;
        margin-left: 95px;
        font-weight: 600;
        margin-bottom: 40px;
      }
      input[name="options"] 
      {
      cursor: pointer;
      }
       .opt_cnt
      {
        margin-top: -10px;
      }
      .opt_cnt label
      {
        margin-left: 10px;
      }
      .btn_container
      {
       display: flex;
       justify-content: space-between; 
      }
      .btn_container button
      {
        background-color: #422a8d;
        color: white;
        margin-right: 90px;
        padding: 8px 24px;
        border: 1px solid #422a8d;
        outline: none;
        border-radius: 3px;
        cursor: pointer;
        font-weight: 600;
        letter-spacing: 0.4px;
      }
       #compiler_container
      {
        width: 800px;
        height: 400px;
        background-color: black;
      }
      #runButton
      {
        padding: 8px 16px;
        background-color: red;
        color: white;
        font-size: 16px;
        outline: none;
        border: 1px solid red;
        cursor: pointer;
        margin-top: 1px;
      }
      .popup-container , .start_popup ,#final_popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black to create the blur effect */
        z-index: 9999;
      } 
      .popup-content , .info_content , #finish_cnt{
        position: absolute;
        top: 45%;
        left: 50%;
        width: 1000px;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }
      #finish_cnt{
        width: 500px;
        display: none;
      }
      .table_container
      {
        max-height: 430px; 
        overflow-y: auto;
      }
      .popup-content h1 , .popup-content p
      {
        display: flex;
        justify-content: center;
      }
      .cls_container
      {
        display: flex;
        justify-content: center;
        align-items: center;
        
      }
      #submitBtn
      {
        padding: 6px 18px;
        border-radius: 3px;
        outline: none;
        border: none;
        background-color: #007bff;
        border: 1px solid #007bff;
        color: white;
      }
      #closebtn
      {
        position: absolute;
        top: 0;
        right: 0;
        border-bottom-left-radius: 5px;
        background-color: transparent;
        padding: 4px 10px;
        font-weight: bold;
        border: none;
        font-size: 16px;
        transition: background-color 0.1s;
      }
      #closebtn:hover
      {
        border-top-right-radius: 5px;
        background-color: grey;
      }
      .instuction li{
        text-align: start;
        max-width: 650px;
        word-wrap: break-word;
        font-weight: 500;
        letter-spacing: 0.2px;
      }
      .bi-check
      {
        background-color: green;
        color: white;
        border-radius: 50%;
        border: 1px solid white;
      }
</style>
</head>
<body>
  <div id="app">
    <div id="whole_Cnt">
      <div class="start_popup" id="wlcm_cnt" style="display: block; ">
        <div class="info_content">
          <h2>{{examtitle}} Instructions:</h2>
          <div style="display: flex;">
            <ul style="list-style: square; line-height: 40px; margin-right: 30px;" class="instuction">
                <li>The examination will comprise of Objective type Multiple Choice Questions (MCQs)</li>
                <li>All questions are compulsory and each carries <b>{{markper}}</b> mark.</li>
                <li>The total number of <b> {{quesCategory.length}} </b> questions, <b> {{tempData}} </b> is a duration of examination, will be different based on the course and a detail is available on your screen.</li>
                <li>There will be no negative marking for the wrong answers.</li> 
                <li>Turn on an Video and Mic to Start a test</li>
                <li>The students just need to click on the Right Choice / Correct option from the
                multiple choices /options given with each question. For Multiple Choice Questions,
                each question has four options, and the candidate has to click the appropriate
                option.</li>
            </ul>
            <div style="margin-top: 10px;">
              <div style="display: flex; justify-content: center;">
                <button id="snap_cnt" @:click="takeSnap">Take a Snap<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-images" viewBox="0 0 16 16" style="margin-left: 8px;">
                  <path d="M4.502 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                  <path d="M14.002 13a2 2 0 0 1-2 2h-10a2 2 0 0 1-2-2V5A2 2 0 0 1 2 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v8a2 2 0 0 1-1.998 2zM14 2H4a1 1 0 0 0-1 1h9.002a2 2 0 0 1 2 2v7A1 1 0 0 0 15 11V3a1 1 0 0 0-1-1zM2.002 4a1 1 0 0 0-1 1v8l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094l1.777 1.947V5a1 1 0 0 0-1-1h-10z"/>
                </svg></button>
              </div>
              <div id="container" style="width: 242px; height: 150px; background-color: black; display: flex;  border-radius: 8px; ">
                <video autoplay="true" id="accessvideo" style="width: 100%; height: 150px;"></video>
                <canvas id="canvasElement" style="width: 0px; height: 100px;"></canvas>
              </div>
              <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 8px;">
              <button id="alw_btn" @:click="enableAccess" :class="{enable_vdio: userVideo,nrml_vid: videocss}">Turn On<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"  fill="currentColor" class="bi bi-camera-video" viewBox="0 0 16 16" style="margin-left: 8px; margin-top: 2px;">
                <path fill-rule="evenodd" d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5zm11.5 5.175 3.5 1.556V4.269l-3.5 1.556v4.35zM2 4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h7.5a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H2z"/>
                </svg></button>
                <button id="mic_btn" @:click="enablemic" :class="{enable_dio: userAudio,nrml_aud: audiocss}">Turn On<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic" viewBox="0 0 16 16" style="margin-left: 8px; margin-top: 2px;">
                  <path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"/>
                  <path d="M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0v5zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3z"/>
                </svg></button>
              </div>
              <div style="display: flex; justify-content: center;">
                <button id="strt_test" @:click="startest" v-if="userAudio && userVideo">Start test</button>
              </div>
              <div id="picture_container">
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <header class="top_navbar">
        <div class="left_content">
          <img class="logo_img" src="https://www.zappyworks.com/ZappyWorks.png">
        </div>
        <div class="right_content">
          <img id="user_img" src="">
          <div class="examiner_name">{{tempExaminer}}</div>
        </div>
      </header>
    
      <div class="main_container">
        <div class="side_navbar">
          <div class="exam_icon">
            <img src="https://ph-asc.com/wp-content/uploads/2015/03/Aptitude-test1.png">
          </div>
          <div class="test_type">
            <input type="radio" id="ques_category1" name="category" value="Logical" v-on:click="getCategory" checked>
            <label for="ques_category1" class="category_title">Logical</label>
          </div>
          <div class="test_type" style="display: none;">
            <input type="radio" id="ques_category2" name="category" value="Technical" v-on:click="getCategory" >
            <label for="ques_category2" class="category_title">Technical</label>
          </div>
          <div class="nav_btn">
            <button v-for="(y,index) in quesCategory" :id="`Nav${index}`" :class="{'highlighted':index === highlightedIndex,nrmlBtn: blue,grnBtn: green,bluBtn: white}" @:click="navshow(index)">{{index+1}}</button>
          </div>
          <div id="container" style="width: 202px; height: 150px;">
            <video autoplay="true" id="fixedvideo" style="width: 202px; height: 150px;"></video>
          </div>
        </div>
        <div class="text_container">
          <div class="bar_continer">
            <div class="progress_bar">
              <div class="chart_bar" :style="{ width: progress + '%' }">{{progress}}%</div>
            </div>
            <button class="time_btn" id="time_btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stopwatch" viewBox="0 0 16 16">
              <path d="M8.5 5.6a.5.5 0 1 0-1 0v2.9h-3a.5.5 0 0 0 0 1H8a.5.5 0 0 0 .5-.5V5.6z"/>
              <path d="M6.5 1A.5.5 0 0 1 7 .5h2a.5.5 0 0 1 0 1v.57c1.36.196 2.594.78 3.584 1.64a.715.715 0 0 1 .012-.013l.354-.354-.354-.353a.5.5 0 0 1 .707-.708l1.414 1.415a.5.5 0 1 1-.707.707l-.353-.354-.354.354a.512.512 0 0 1-.013.012A7 7 0 1 1 7 2.071V1.5a.5.5 0 0 1-.5-.5zM8 3a6 6 0 1 0 .001 12A6 6 0 0 0 8 3z"/>
            </svg>{{ formattedTime }}</button>
          </div>
          <div class="quiz_container">
            <div class="question_container">
              <div class="ques_no">{{currentQuestion + 1}}.</div>
              <p class="question_title">{{fetchQuestion}}</p>
            </div>
          </div>
          <div class="ans_cont" v-for="(x,index) in optionCategory" v-if="selectedCategory == 'Logical'">
            <div class="opt_cnt"> 
              <input type="radio" name="options" :id="`j${index+1}`" :value="x" v-model="getAnswers[currentQuestion]"/>
              <label :for="`j${index+1}`">{{x}}</label>
            </div>
          </div>
          <div id="prgm_cnt" v-else="selectedCategory">
        
          </div>
          <div class="btn_container">
            <button id="prevs_btn" v-on:click="prevShow">Prev</button>
            <button id="next_btn" v-on:click="nextShow">Next</button>
          </div>
        </div>
      </div>
      <div id="popupContainer" class="popup-container">
        <div class="popup-content" id="pop_content">
          <button id="closebtn" @:click="closepopup">X</button>
          <h1>Good Job!</h1>
          <p>Are you sure you want to submit</p>
          <div class="table_container">
            <table class="table table-striped" style="max-height: 300px;
              overflow-y: auto;">
              <thead>
                <tr>
                  <th scope="col" style="text-align: center;">Question number</th>
                  <th scope="col" style="text-align: center;">Answer</th>
                  <th scope="col" style="text-align: center;">Checked or not</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="(y,index) in getAnswers">
                  <th style="text-align: center;"scope="row">{{index + 1}}</th>
                  <td style="text-align: center;">{{y}}</td>
                  <td style="display: flex; justify-content: center; align-items: center;"><div style="width: 12px; height: 12px; background-color: green; border-radius: 2px; margin-right: 6px;"></div>Checked</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="cls_container">
            <button id="submitBtn" @:click="submitpopup">Submit</button>
          </div>
        </div>
      </div>
    </div>
    <div id="final_popup">
      <div id="finish_cnt">
        <div style="display: flex; justify-content: center; flex-direction: column; align-items: center;">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
          </svg>
          <h1>Congratulation {{tempExaminer}}</h1>
          <p style="letter-spacing: 1px; font-size: 14px;">You Completed all {{quesCategory.length}}/{{quesCategory.length}} in our {{examtitle}} examination</p>
          <h4 style="letter-spacing: 0.5px;">Result will announce soon!!!</h4>
        </div>
      </div>
    </div>
  </div>
<script>
 
  const app = Vue.createApp({
    data() {
      return {
        examtitle: "",
        tempExaminer: "" ,
        Examinermail: "",
        getquestionset: [],
        quesCategory: [],
        optionCategory: [],
        currentQuestion: 0,
        fetchQuestion: "",
        selectedOptions: "",
        tempClg: "",
        getAnswers: [],
        selectedCategory: "Logical",
        blue: true,
        green: false,
        white: false,
        minutes: 0,
        seconds: 0,
        timerId: null,
        codeAnswer: [],
        highlightedIndex: 0,
        progress: 0,
        chart: true,
        getCategory: "",
        tempData: 0,
        markper: 0,
        audiocss: true,
        videocss: true,
        userVideo: false,
        userAudio: false

      }
    },
    created ()
    {
      var gethis=this;
      ZOHO.CREATOR.init().then(function(data){
        var queryParams = ZOHO.CREATOR.UTIL.getQueryParams();
        var param = queryParams.testID;
        var config = {
          appName : "aptitude-quiz",
          reportName : "All_Student_Details", 
          id : `${queryParams.testID}`
        } 
        ZOHO.CREATOR.API.getRecordById(config).then(function(response){
          console.log(response.data.Assign_question_set.ID);
          gethis.tempExaminer = response.data.Student_Name;
          gethis.Examinermail = response.data.Student_mail;
          ZOHO.CREATOR.UTIL.setImageData(document.getElementById("user_img"), response.data.Student_Profile);
          var set = { 
            appName : "aptitude-quiz",
            reportName : "Question_set"
          }
          ZOHO.CREATOR.API.getAllRecords(set).then(function(response){
            var recordArr = response.data;
            
            for(var index in recordArr){
              gethis.getquestionset.push(recordArr[index]);
            }	
            var randomNum = Math.floor(Math.random() * gethis.getquestionset.length) ;
            console.log(gethis.getquestionset[randomNum]);
            gethis.tempData = gethis.getquestionset[randomNum];
            gethis.examtitle = gethis.getquestionset[randomNum].Quiz_type;
            console.log(gethis.examtitle);
            gethis.tempData = gethis.getquestionset[randomNum].Quiz_Time;
            gethis.markper = gethis.getquestionset[randomNum].Mark_per_Logical_question;
            gethis.tempClg = gethis.getquestionset[randomNum].ID;
            var questionDet = {
              appName : "aptitude-quiz",
              reportName : "All_Question_Details",
            }
            ZOHO.CREATOR.API.getAllRecords(questionDet).then(function(response){
              var quesArr = response.data;

              gethis.quesCategory = quesArr.filter(item =>  item.Quiz_Category.ID === gethis.tempClg && item.Question_Category === gethis.selectedCategory);
              var quizId = gethis.quesCategory[gethis.currentQuestion].Quiz_Category.ID;
              gethis.fetQues();
              console.log(gethis.quesCategory.length-1);
              for (let k = 0; k < gethis.quesCategory.length; k++) {
                gethis.getAnswers.push("");
              }
              console.log(gethis.getAnswers);
              document.getElementById("ques_category2").disabled = true; 
              document.getElementById("ques_category1").disabled = true; 
              });
          });
        });
      });
    },
    computed: {
      formattedTime() {
        const formattedMinutes = this.padZero(this.minutes);
        const formattedSeconds = this.padZero(this.seconds);
        return `${formattedMinutes} : ${formattedSeconds}`;
      },
    },
    methods: {
      // changevisible()
      // {
      //   if (document.visibilityState  == "hidden") {
          
      //     alert("hi");
      //     gethis.nextShow();
      //   }
      // },
      takeSnap()
      {
        ZOHO.CREATOR.init() 
        .then(function(data) {
              let video = document.querySelector("#accessvideo");
          let canvas = document.querySelector("#canvasElement");
          let snapButton = document.querySelector("#snap_cnt");
          let pictureContainer = document.querySelector("#picture_container");
          let stream;
          console.log(pictureContainer);
          let context = canvas.getContext("2d");
          var canvasWidth = 100;
          var canvasheight = 100;
          context.drawImage(video, 0, 0, canvasWidth, canvasheight);
          let capturedImage = new Image();
          capturedImage.src = canvas.toDataURL();
          console.log(capturedImage);
          console.log(capturedImage.src);
          pictureContainer.appendChild(capturedImage);
          canvas.style.display = "none";
          video.style.display = "block";
          var formData = {
            "data" : {
              "Candidate_image"  : capturedImage.src
            }
          }
          var request = {
          appName : "aptitude-quiz",
          formName : "Conducted_Test",
          data : formData
          }
          ZOHO.CREATOR.API.addRecord(request).then(function(response){
            if(response.code == 3000){
              console.log("Record added successfully");
            }
          });
        });
      },
      startest()
      {
        var gethis = this;
        document.getElementById("time_btn").style.display = "flex";
        document.getElementById("wlcm_cnt").style.display = 'none';
        gethis.startTimer(gethis.tempData);
        ZOHO.CREATOR.init()
          .then(function(data) {
          console.log("hi");
          var queryParams = ZOHO.CREATOR.UTIL.getQueryParams();
          var param = queryParams.testID;
          var formData = {
            "data" : {
                "Candidate_Name"          : param,
                "Candidate_Mail"         :  param,
                "Question_set_assigned"  : `${gethis.tempClg}`,
                "Date_of_test_assigned"  : "10-Jan-2020"
            }
          } 
          var config = { 
            appName : "aptitude-quiz",
            formName   : "Conducted_Test",
            data : formData
          } 
          ZOHO.CREATOR.API.addRecord(config).then(function(response){
            console.log(response);
            if(response.code == 3000){
              console.log("Record added successfully");
            } 
          })  
        });
        this.showvideo(document.getElementById("fixedvideo"));
      },
      enablemic()
      {
        var gethis = this;
        if (navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ audio: true })
          .then(function(stream) {
            console.log("success");
            gethis.userAudio = true;
            gethis.audiocss = false,
            console.log(gethis.userAudio);
          })
          .catch(function(error) {
            console.log("Something went wrong!");
          });
        } 
      },
      enableAccess()
      {
        var tempvideo = document.getElementById("accessvideo");
        this.showvideo(tempvideo);
      },
      showvideo(video)
      {
        var gethis = this;
        // let snapButton = document.querySelector("#snapButton");
        // let pictureContainer = document.querySelector("#pictureContainer");
        if (navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true })
          .then(function(stream) {
            video.srcObject = stream;
            gethis.userVideo = true;
            console.log(gethis.userVideo);
            video.style.transform = "scaleX(-1)";
          })
          .catch(function(error) {
            console.log("Something went wrong!");
          });
        } 
        else {
            console.log("getUserMedia not supported!");
        } 
      },
      closepopup()
      {
        document.getElementById("popupContainer").style.display = 'none';
      },
      submitpopup()
      {
        var gethis = this;
        if (gethis.getAnswers.every((value) => value !== "")) {
          ZOHO.CREATOR.init()
          .then(function(data) {
          console.log("hi");
          var formData = {
            "data" : {
                "Name"           : `${gethis.tempExaminer}`,
                "Student_Mail"   :  `${gethis.Examinermail}`,
                "Logical_Answers": `${gethis.getAnswers}`+",",
                "Question_set"   :  `${gethis.tempClg}`
            }
          } 
          var config = { 
            appName : "aptitude-quiz",
            formName   : "Answer_record",
            data : formData
          } 
          ZOHO.CREATOR.API.addRecord(config).then(function(response){
            console.log(response);
            if(response.code == 3000){
              console.log("Record added successfully");
              document.querySelector("#pop_content").style.display = "none";
              document.querySelector("#final_popup").style.display = "block";
              document.querySelector("#whole_Cnt").style.display = "none";
        document.querySelector("#finish_cnt").style.display = "block"; 
            } 
          })
          });
        }
    
      },
      fetQues()
      {
            var gethis = this;
            gethis.fetchQuestion = (gethis.quesCategory[gethis.currentQuestion].Questions);
            gethis.optionCategory = [];
            gethis.optionCategory.push(gethis.quesCategory[gethis.currentQuestion].Enter_your_Option_1);
            gethis.optionCategory.push(gethis.quesCategory[gethis.currentQuestion].Enter_your_Option_2);
            gethis.optionCategory.push(gethis.quesCategory[gethis.currentQuestion].Enter_your_Option_3);
            gethis.optionCategory.push(gethis.quesCategory[gethis.currentQuestion].Enter_your_Option_4);  
            if (gethis.currentQuestion  == gethis.quesCategory.length -1) {
              document.getElementById("next_btn").innerText = "Submit";
            }  
      },
      nextShow(){
        var gethis=this;
        if (gethis.getAnswers[gethis.currentQuestion] != "") {
         var navCnt = document.getElementById(`Nav${gethis.currentQuestion}`);
         navCnt.classList.add('grnBtn');
         var tempAnsw= gethis.getAnswers.filter(item => item !== "");
         console.log(tempAnsw);
         gethis.progress =Math.round(((tempAnsw.length) / this.quesCategory.length) * 100);
        }
        if (gethis.currentQuestion < gethis.quesCategory.length-1) {
          gethis.codeAnswer[gethis.currentQuestion] = gethis.outCode;
          console.log(gethis.codeAnswer);
          gethis.currentQuestion++;
          for (let i = 0; i < gethis.quesCategory.length; i++) {
            document.getElementById(`Nav${i}`).classList.remove('highlighted');
            document.getElementById(`Nav${i}`).classList.remove('bluBtn');
            if (i == gethis.currentQuestion) {
              document.getElementById(`Nav${i}`).classList.add('bluBtn');
            }
            else{
              document.getElementById(`Nav${i}`).classList.add('nrmlBtn');
            } 
          }
          gethis.fetQues();
          gethis.show_compiler();
        }
        else if (gethis.currentQuestion == gethis.quesCategory.length-1) {
          document.getElementById("next_btn").innerText = "Next";
          if (gethis.getAnswers.every((value) => value !== "")) {
            document.getElementById("popupContainer").style.display = 'block';
          }
          else
          {
            alert("Answer all the Logical Questions");
          }
        }
        
      },
      navshow(navQues){
        var gethis=this; 
        gethis.currentQuestion = navQues;
        var tempAnsw= gethis.getAnswers.filter(item => item !== "");
        console.log(tempAnsw);
        gethis.progress =Math.round(((tempAnsw.length) / this.quesCategory.length) * 100);
        for (let j = 0; j < gethis.getAnswers.length; j++) {
          const element = gethis.getAnswers[j];
          if (element !== "") {
            document.getElementById(document.getElementById(`Nav${j}`).classList.remove('highlighted'));
            document.getElementById(`Nav${j}`).classList.remove('bluBtn');
            document.getElementById(`Nav${j}`).classList.add('grnBtn');
          }
        }
        for (let i = 0; i < gethis.quesCategory.length; i++) {
          document.getElementById(`Nav${i-0}`).classList.remove('highlighted');
          document.getElementById(`Nav${i-0}`).classList.remove('bluBtn');
          if (i == gethis.currentQuestion) {
            document.getElementById(`Nav${i}`).classList.add('bluBtn');
          }
          else{
            document.getElementById(`Nav${i}`).classList.add('nrmlBtn');
          } 
        }
        if (gethis.currentQuestion  == gethis.quesCategory.length -1) {
           document.getElementById("next_btn").innerText = "Submit";
        }  
        else
        {
          document.getElementById("next_btn").innerText = "Next"
        }
        console.log(gethis.currentQuestion);
        gethis.fetQues();
        gethis.show_compiler();
      },
      prevShow(){
        var gethis=this;
        if (gethis.currentQuestion > 0 ) {
          if (gethis.getAnswers[gethis.currentQuestion] != "") {
          var tempAnsw= gethis.getAnswers.filter(item => item !== "");
          console.log(tempAnsw);
          gethis.progress =Math.round(((tempAnsw.length) / this.quesCategory.length) * 100);
           var navCnt = document.getElementById(`Nav${gethis.currentQuestion}`);
           navCnt.classList.add('grnBtn');
          }
          gethis.currentQuestion--; 
          for (let i = 0; i < gethis.quesCategory.length; i++) {
            if (i == gethis.currentQuestion) {
              document.getElementById(`Nav${i+1}`).classList.remove('bluBtn')
              document.getElementById(`Nav${i}`).classList.add('bluBtn');
            }
            else{
              document.getElementById(`Nav${i}`).classList.add('nrmlBtn');
            } 
          }
          gethis.fetQues(gethis.currentQuestion);
          gethis.show_compiler();
        }
      },
      getCategory(temp)
      {
        var gethis = this;
        ZOHO.CREATOR.init()
        .then(function(data) {
          console.log(gethis.tempClg);
          gethis.fetchQuestion = "";
          gethis.optionCategory = [];
          gethis.quesCategory = [];
          gethis.currentQuestion = 0;
          gethis.progress = 0;
          if (temp == "Technical") {
            var techQues = document.getElementById("ques_category2");
            techQues.checked = true;
            gethis.selectedCategory = temp;
          }
          var questionDet = {
            appName : "aptitude-quiz",
	          reportName : "All_Question_Details",
          }
          ZOHO.CREATOR.API.getAllRecords(questionDet).then(function(response){
            var recordArr = response.data;
            gethis.quesCategory = recordArr.filter(item => item.College_details.ID === gethis.tempClg && item.Question_Category === gethis.selectedCategory);
            console.log(gethis.quesCategory[gethis.currentQuestion].length);
            if (gethis.selectedCategory == "Logical") {
              gethis.fetQues();
            }
            if (gethis.selectedCategory == "Technical") {
              gethis.fetchQuestion = (gethis.quesCategory[gethis.currentQuestion].Questions);
              gethis.fetQues();
              gethis.show_compiler();
            }
          });
        });
      },
      show_compiler()
      {
        var gethis = this;
        var runButton = document.createElement('button');
        runButton.id = 'runButton';
        runButton.textContent = 'Run Code';
        var compileDiv = document.createElement('div');
        compileDiv.id = 'compiler_container';
        var outputDiv = document.createElement('div');
        outputDiv.id = 'output';
        var cmplContainer = document.getElementById("prgm_cnt");
        cmplContainer.innerHTML = "";
        cmplContainer.appendChild(compileDiv);
        cmplContainer.appendChild(runButton);
        cmplContainer.appendChild(outputDiv);
        document.getElementById('compiler_container').innerText = "";
        document.getElementById('output').innerText = "";
        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.26.1/min/vs' }});
        require(['vs/editor/editor.main'], function() {
        // Initialize Monaco Editor
          var editor = monaco.editor.create(document.getElementById('compiler_container'), {
          value: '// Enter your code here',
          language: 'javascript',
          theme: 'vs-dark'
          });

          // Run the code when the button is clicked
          var runButton = document.getElementById('runButton');
          runButton.addEventListener('click', function() {
            var code = editor.getValue();
            gethis.outCode = code;
            console.log(gethis.outCode);
            var outputDiv = document.getElementById('output');
            
            // Clear the output div
            outputDiv.innerText = '';

            var selectedLanguage = 'javascript';
            var result = '';

            switch (selectedLanguage) {
              case 'javascript':
                try {
                  // Execute the JavaScript code
                  result = eval(code);
                } catch (error) {
                  outputDiv.innerText = 'Error: ' + error;
                  return;
                }
                break;
              case 'java':
                try {
                  // Execute the JavaScript code
                  result = eval(code);
                } catch (error) {
                  outputDiv.innerText = 'Error: ' + error;
                  return;
                }
                  break;
              case 'python':
                console.log("python");
                try {
                  // Execute the JavaScript code
                  result = eval(code);
                
                } catch (error) {
                  outputDiv.innerText = 'Error: ' + error;
                 
                  return;
                }
                  break;
                // Send the code to the server for execution
              var xhr = new XMLHttpRequest();
              xhr.open('POST', '/execute', true);
              xhr.setRequestHeader('Content-type', 'application/json');

              xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                  // Handle the response from the server
                  var response = JSON.parse(xhr.responseText);
                  if (response.error) {
                    outputDiv.innerText = 'Error: ' + response.error;
                  } else {
                    result = response.output;   
                  }
                }
              };

              xhr.send(JSON.stringify({ code: code, language: selectedLanguage }));
              break;
            }
            // Display the output
            console.log(result);
            outputDiv.innerText = 'Output: ' + result;
          });
        });
      },
      startTimer(minutes) {
        var gethis = this;
        gethis.minutes = minutes;
        gethis.timerId = setInterval(() => {
          if (gethis.minutes > 0 || gethis.seconds > 0) {
            if (gethis.seconds === 0) {
              gethis.minutes--;
              gethis.seconds = 59;
            } else {
              gethis.seconds--;
            }
          } else {
            clearInterval(gethis.timerId);
          }
        }, 1000);
      },
      padZero(value) {
        return value.toString().padStart(2, '0');
      },
    },
    mounted() {
      gethis.startTimer();
  
    },
    beforeUnmount() {
      clearInterval(gethis.timerId);
    },
  })
 app.mount('#app')
</script>
</body>
</html>
